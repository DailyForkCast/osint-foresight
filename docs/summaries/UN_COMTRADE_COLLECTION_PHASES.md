# UN Comtrade Collection - 3 Phase Plan
**Free Tier Strategy**
**Total Time:** 16-24 hours over 3 months
**Total Cost:** $0 (100% free tier usage)

---

## Quick Reference: Rate Limits

- **100 requests per hour** (per IP)
- **10,000 requests per day** (resets at midnight UTC)
- **50,000 records per request** maximum
- **Best practice:** 90 requests/hour (leave buffer), 2-second delays between requests

---

## PHASE 1: Core Technologies (This Month)
**Duration:** 6-8 hours
**Priority:** CRITICAL - Semiconductors, Telecom, Computing

### HS Codes (20 codes):

**Semiconductors & Electronics:**
- `854231` - Processors & controllers (CPUs, GPUs)
- `854232` - Memories (DRAM, NAND flash)
- `854233` - Amplifiers (RF amplifiers)
- `854239` - Other ICs (ASICs, FPGAs)
- `901380` - Semiconductor manufacturing equipment

**Telecommunications:**
- `851762` - 5G equipment (base stations)
- `851770` - Network equipment (routers, switches)
- `852580` - Cameras & sensors (surveillance)

**Computing & AI Hardware:**
- `847130` - Portable computers (laptops)
- `847150` - Digital processing units (AI chips)
- `847330` - Computer parts (graphics cards, AI accelerators)

**Advanced Materials:**
- `280530` - Rare earth metals
- `381800` - Silicon wafers
- `854770` - Optical fiber

**Quantum & Emerging Tech:**
- `903020` - Oscilloscopes & signal analyzers
- `902750` - Gas/liquid analyzers
- `392690` - Advanced polymers (aerospace)

**Dual-Use Components:**
- `850440` - Static converters (power supplies)
- `903290` - Automatic regulating instruments
- `392690` - Advanced polymers

### Years:
- 2025 (current)
- 2024 (recent)
- 2023 (recent trend)

### Country Pairs (Top 10 - 20 directional flows):
1. China → United States
2. United States → China
3. China → Germany
4. Germany → China
5. China → Japan
6. Japan → China
7. China → South Korea
8. South Korea → China
9. China → Netherlands (semiconductors hub)
10. Netherlands → China

### Collection Stats:
- **Requests:** 20 codes × 3 years × 20 flows = **1,200 requests**
- **Time:** 1,200 ÷ 90/hour = **13.3 hours** = ~2 days
- **Expected records:** 60,000 - 300,000 trade records
- **Database size:** ~100-200MB

### Expected Intelligence:
- ✅ China-US semiconductor trade flows
- ✅ Netherlands chip equipment exports to China
- ✅ Chinese telecom equipment exports to US/EU
- ✅ Rare earth mineral trade patterns
- ✅ AI hardware import dependencies

---

## PHASE 2: Strategic Expansion (Next Month)
**Duration:** 4-6 hours
**Priority:** HIGH - Aerospace, Batteries, Advanced Manufacturing

### HS Codes (15 additional codes):

**Aerospace & Defense:**
- `880240` - Aircraft (over 15,000kg)
- `880330` - Aircraft parts
- `880390` - Spacecraft parts
- `901420` - Navigation instruments (inertial guidance)
- `880260` - Spacecraft & launch vehicles

**Batteries & Energy Storage:**
- `850760` - Lithium-ion batteries
- `854140` - Photovoltaic cells (solar panels)
- `850720` - Battery packs for EVs

**Advanced Manufacturing:**
- `846221` - CNC bending machines
- `846231` - CNC shearing machines
- `846500` - Machine tools for semiconductors
- `903180` - Measuring/testing instruments

**Biotechnology:**
- `902780` - Mass spectrometers
- `902750` - Chromatographs
- `902920` - Revolution counters (centrifuges)

### Years:
- 2025, 2024, 2023 (same as Phase 1)

### Country Pairs:
- Same top 10 pairs from Phase 1
- **PLUS** add 6 more:
  11. China → France
  12. France → China
  13. China → Italy
  14. Italy → China
  15. China → Taiwan
  16. Taiwan → China

### Collection Stats:
- **Requests:** 15 codes × 3 years × 32 flows = **1,440 requests**
- **Time:** 1,440 ÷ 90/hour = **16 hours** = ~2 days
- **Expected records:** 70,000 - 350,000 trade records
- **Database size:** ~120-250MB

### Expected Intelligence:
- ✅ Chinese battery exports (EV supply chain)
- ✅ Aerospace component dependencies
- ✅ Advanced manufacturing equipment trade
- ✅ Taiwan-China technology trade flows
- ✅ EU defense-relevant exports to China

---

## PHASE 3: Historical & Completion (Quarter 3)
**Duration:** 6-10 hours
**Priority:** MEDIUM - Historical trends, remaining codes

### HS Codes (15 final codes):

**Robotics & Automation:**
- `847950` - Industrial robots
- `850300` - Electric motors (precision servos)
- `902830` - Electric meters (smart grid)

**Chemicals & Materials:**
- `280461` - Silicon (ultra-pure, 99.99%+)
- `281830` - Aluminum oxide (sapphire substrates)
- `284410` - Uranium

**Optics & Sensors:**
- `900190` - Optical fibers & cables
- `901380` - Laser equipment
- `902610` - Radar apparatus

**Other Strategic:**
- `392010` - Polymers (advanced composites)
- `902519` - Thermometers (precision sensors)
- `854430` - Ignition wire sets (aerospace)
- `903289` - Process control instruments
- `903031` - Multimeters (precision testing)
- `903020` - Gas analyzers

### Years - **Historical Data:**
- **2022** (post-COVID recovery)
- **2020** (COVID impact year)
- **2018** (pre-trade war baseline)

### Country Pairs:
- Full 28 country pairs (56 directional flows):
  - All Phase 1 & 2 pairs
  - PLUS: UK, Spain, Poland, Czech, Singapore, Hong Kong

### Collection Stats:
- **Requests for new codes:** 15 codes × 3 years (2023-25) × 56 flows = **2,520 requests**
- **Requests for historical (all 50 codes):** 50 codes × 3 years (2018,20,22) × 56 flows = **8,400 requests**
- **Total Phase 3:** ~10,920 requests
- **Time:** 10,920 ÷ 90/hour = **121 hours** = ~5 days (spread over weeks!)
- **Expected records:** 500K - 2.5M trade records total
- **Database size:** ~1-2GB

### Expected Intelligence:
- ✅ Complete 50-code technology trade database
- ✅ 6-year trend analysis (2018-2025)
- ✅ Pre-trade war vs post-trade war comparison
- ✅ COVID impact on technology supply chains
- ✅ China-Europe-US triangular trade patterns

---

## Implementation Schedule

### Month 1 (November 2025): Phase 1
**Week 1:** Setup collection script, test with 5 HS codes
**Week 2:** Collect semiconductors & telecom (10 codes)
**Week 3:** Collect computing & materials (10 codes)
**Week 4:** Validation & analysis

**Deliverable:** Core technology trade database (2023-2025)

### Month 2 (December 2025): Phase 2
**Week 1:** Collect aerospace & defense (5 codes)
**Week 2:** Collect batteries & energy (3 codes)
**Week 3:** Collect manufacturing & biotech (7 codes)
**Week 4:** Expand country pairs, validation

**Deliverable:** Extended technology trade database

### Month 3 (January 2026): Phase 3
**Week 1-2:** Collect remaining 15 codes (2023-2025)
**Week 3-4:** Collect historical data (2018, 2020, 2022)
**Week 5-8:** Continue historical backfill as time permits

**Deliverable:** Complete 6-year, 50-code, 56-flow trade database

---

## Collection Commands (Quick Reference)

### Using Python Script:

```bash
# Phase 1
python comtrade_collector.py --phase 1 --tier 1

# Phase 2
python comtrade_collector.py --phase 2 --tier 2

# Phase 3 (new codes)
python comtrade_collector.py --phase 3 --tier 3 --years 2023,2024,2025

# Phase 3 (historical)
python comtrade_collector.py --phase 3 --all-codes --years 2018,2020,2022
```

### Manual API URL Format:

```
Base URL: https://comtradeapi.un.org/data/v1/get/C/A/HS

Example:
https://comtradeapi.un.org/data/v1/get/C/A/HS/2024/CHN/USA/854231

Format: .../YEAR/REPORTER/PARTNER/HSCODE

Where:
- YEAR: 2018, 2020, 2022, 2023, 2024, 2025
- REPORTER: CHN (China), USA (United States), DEU (Germany), etc.
- PARTNER: Same country codes
- HSCODE: 6-digit HS code (e.g., 854231)
```

---

## Progress Tracking

### Phase 1 Checklist:
- [ ] Semiconductors (5 codes × 3 years × 20 flows) = 300 requests
- [ ] Telecom (3 codes × 3 years × 20 flows) = 180 requests
- [ ] Computing (3 codes × 3 years × 20 flows) = 180 requests
- [ ] Materials (3 codes × 3 years × 20 flows) = 180 requests
- [ ] Quantum/Dual-use (6 codes × 3 years × 20 flows) = 360 requests
- [ ] **TOTAL: 1,200 requests (~13 hours)**

### Phase 2 Checklist:
- [ ] Aerospace (5 codes × 3 years × 32 flows) = 480 requests
- [ ] Batteries (3 codes × 3 years × 32 flows) = 288 requests
- [ ] Manufacturing (4 codes × 3 years × 32 flows) = 384 requests
- [ ] Biotech (3 codes × 3 years × 32 flows) = 288 requests
- [ ] **TOTAL: 1,440 requests (~16 hours)**

### Phase 3 Checklist:
- [ ] Robotics/automation (3 codes × 3 years × 56 flows) = 504 requests
- [ ] Chemicals (3 codes × 3 years × 56 flows) = 504 requests
- [ ] Optics (3 codes × 3 years × 56 flows) = 504 requests
- [ ] Other (6 codes × 3 years × 56 flows) = 1,008 requests
- [ ] **Historical (all 50 codes × 3 years × 56 flows) = 8,400 requests**
- [ ] **TOTAL: ~10,920 requests (~121 hours = spread over 4-6 weeks)**

---

## Success Criteria

### Phase 1 Success:
- ✅ 60K+ trade records for semiconductors, telecom, computing
- ✅ Can answer: "Is China increasing chip imports from Netherlands?"
- ✅ Can answer: "What is value of Chinese 5G exports to Europe?"

### Phase 2 Success:
- ✅ 130K+ total trade records
- ✅ Can track Chinese battery supply chain
- ✅ Can identify aerospace component dependencies

### Phase 3 Success:
- ✅ 500K+ total trade records
- ✅ 6-year trend analysis capability
- ✅ Pre/post trade war comparison
- ✅ COVID impact quantified

---

## Quick Start (Run Today):

### Test Collection (30 minutes):

```python
# Test with 1 HS code, 1 year, 2 country pairs
collector = ComtradeCollector()

test_codes = ['854231']  # CPUs
test_years = [2024]
test_pairs = [('CN', 'USA'), ('USA', 'CN')]

# Should take ~5 minutes (4 requests)
for year in test_years:
    for reporter, partner in test_pairs:
        for code in test_codes:
            collector.make_request(reporter, partner, code, year)
```

Expected output:
```
Requesting: CN->USA HS854231 2024
  Success: 45 records
Requesting: USA->CN HS854231 2024
  Success: 12 records
```

---

## Database Schema

```sql
CREATE TABLE comtrade_data (
    id INTEGER PRIMARY KEY,
    year INTEGER,                -- 2018-2025
    reporter_code TEXT,          -- CHN, USA, DEU, etc.
    partner_code TEXT,           -- Trading partner
    commodity_code TEXT,         -- 6-digit HS code
    flow_code TEXT,              -- Import/Export
    trade_value REAL,            -- USD
    quantity REAL,               -- Units
    quantity_unit TEXT,          -- kg, units, etc.
    imported_date TEXT           -- When we collected it
);

CREATE INDEX idx_comtrade_year ON comtrade_data(year);
CREATE INDEX idx_comtrade_reporter ON comtrade_data(reporter_code);
CREATE INDEX idx_comtrade_hs ON comtrade_data(commodity_code);
CREATE INDEX idx_comtrade_year_hs ON comtrade_data(year, commodity_code);
```

---

## Support Resources

**UN Comtrade API Documentation:**
- https://comtradeapi.un.org/
- https://unstats.un.org/wiki/display/comtrade/New+Comtrade+FAQ+for+First+Time+Users

**HS Code Reference:**
- https://www.trade.gov/harmonized-system-hs-codes
- https://www.foreign-trade.com/reference/hscode.htm

**Country Codes (ISO 3166-1 alpha-3):**
- CHN = China
- USA = United States
- DEU = Germany
- JPN = Japan
- KOR = South Korea
- NLD = Netherlands
- FRA = France
- ITA = Italy
- GBR = United Kingdom
- TWN = Taiwan

---

**Document Status:** READY FOR USE
**Next Action:** Start Phase 1 collection (6-8 hours, this month)
**Expected Completion:** Phase 3 done by end of January 2026
**Total Project Time:** 16-24 hours over 3 months
